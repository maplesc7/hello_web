<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Stylish Clock</title>
  <style>
    :root {
      --bg-1: #0f0f14;
      --bg-2: #141821;
      --fg-1: #e8ecf1;
      --accent-1: #7df9ff;
      --accent-2: #ff79c6;
      --glass: rgba(255, 255, 255, 0.08);
      --blur: 18px;
      --ring: rgba(255,255,255,0.14);
      --shadow: 0 10px 30px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.08);
    }

    .theme-cyber { --accent-1:#7df9ff; --accent-2:#ff79c6; }
    .theme-ink   { --accent-1:#c2c8d0; --accent-2:#6e7a86; }
    .theme-sunrise { --accent-1:#ffb86b; --accent-2:#ff6b6b; }
    .theme-ocean { --accent-1:#00c9ff; --accent-2:#92fe9d; }
    .theme-lava { --accent-1:#ff6a00; --accent-2:#ee0979; }
    .theme-forest { --accent-1:#11998e; --accent-2:#38ef7d; }
    .theme-royal { --accent-1:#8360c3; --accent-2:#2ebf91; }

    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; }

    body {
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
      color: var(--fg-1);
      background: linear-gradient(160deg, var(--bg-1), var(--bg-2));
      background-attachment: fixed;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .clock-card {
      width: min(92vw, 760px);
      aspect-ratio: 1 / 2;
      border-radius: 28px;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      backdrop-filter: blur(var(--blur)) saturate(1.15);
      -webkit-backdrop-filter: blur(var(--blur)) saturate(1.15);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.10);
      padding: 20px;
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
    }

    .time {
      margin-top: 15%; /* 上1/3あたりに配置 */
      font-weight: 700;
      font-size: clamp(60px, 20vh, 220px);
      letter-spacing: -0.03em;
      background: linear-gradient(90deg, var(--accent-1), var(--accent-2));
      -webkit-background-clip: text; background-clip: text;
      -webkit-text-fill-color: transparent; color: transparent;
    }

    .secs {
      font-size: 0.5em;
      vertical-align: super;
      background: linear-gradient(90deg, var(--accent-2), var(--accent-1));
      -webkit-background-clip: text; background-clip: text;
      -webkit-text-fill-color: transparent; color: transparent;
    }

    .date {
      margin-top: 8px;
      font-size: clamp(16px, 2.4vh, 24px);
      font-weight: 500;
      opacity: 0.92;
    }

    .hints {
      position: absolute;
      bottom: 14px;
      font-size: 12px;
      opacity: .6;
      text-align: center;
    }

    /* グラスモーフィズム追加レイヤー */
    .glass-layer {
      position: absolute;
      top: 10%; left: 5%; right: 5%; height: 25%;
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(20px) saturate(1.3);
      -webkit-backdrop-filter: blur(20px) saturate(1.3);
      border-radius: 30px;
      box-shadow: 0 8px 30px rgba(0,0,0,.3);
      transform: rotate(-3deg);
    }
    .glass-layer2 {
      position: absolute;
      bottom: 10%; left: 8%; right: 8%; height: 20%;
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(25px) saturate(1.2);
      -webkit-backdrop-filter: blur(25px) saturate(1.2);
      border-radius: 40px;
      box-shadow: inset 0 0 30px rgba(255,255,255,.15);
      transform: rotate(2deg);
    }
  </style>
</head>
<body class="theme-cyber">
  <div class="clock-card" id="card">
    <div class="glass-layer"></div>
    <div class="glass-layer2"></div>
    <div class="time" id="time">00:00<span class="secs" id="secs">:00</span></div>
    <div class="date" id="date">1970-01-01 Thu</div>
    <div class="hints">タップ: 秒表示切替 / ダブルタップ: テーマ変更 / 長押し: 設定</div>
  </div>

  <dialog id="settings">
    <form method="dialog" class="sheet">
      <div class="row">
        <label>秒表示</label>
        <div class="seg">
          <button type="button" id="secOn" aria-pressed="true">ON</button>
          <button type="button" id="secOff" aria-pressed="false">OFF</button>
        </div>
      </div>
      <div class="footer">
        <button value="cancel">閉じる</button>
      </div>
    </form>
  </dialog>

  <script>
    const elTime = document.getElementById('time');
    const elSecs = document.getElementById('secs');
    const elDate = document.getElementById('date');
    const card = document.getElementById('card');
    const sheet = document.getElementById('settings');
    const weekdays = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];

    const state = { showSeconds: true, theme: 'theme-cyber' };

    function pad(n) { return n < 10 ? '0' + n : n; }

    function formatDate(d) {
      return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())} ${weekdays[d.getDay()]}`;
    }

    function render() {
      const d = new Date();
      const h = pad(d.getHours());
      const m = pad(d.getMinutes());
      const s = pad(d.getSeconds());
      elTime.innerHTML = `${h}:${m}${state.showSeconds ? `<span class="secs">:${s}</span>` : ''}`;
      elDate.textContent = formatDate(d);
    }

    setInterval(render, 1000);
    render();

    // タップで秒切替
    card.addEventListener('click', () => {
      state.showSeconds = !state.showSeconds;
      render();
    });

    // ダブルタップでテーマ切替
    let lastTap = 0;
    card.addEventListener('touchend', () => {
      const now = Date.now();
      if (now - lastTap < 300) {
        cycleTheme();
      }
      lastTap = now;
    });

    // 長押しで設定表示
    let pressTimer;
    card.addEventListener('pointerdown', () => {
      pressTimer = setTimeout(() => { sheet.showModal(); }, 500);
    });
    card.addEventListener('pointerup', () => clearTimeout(pressTimer));

    function cycleTheme(){
      const themes = ['theme-cyber','theme-ink','theme-sunrise','theme-ocean','theme-lava','theme-forest','theme-royal'];
      const idx = themes.indexOf(state.theme);
      state.theme = themes[(idx+1)%themes.length];
      document.body.className = state.theme;
    }

    document.getElementById('secOn').addEventListener('click', () => { state.showSeconds = true; render(); });
    document.getElementById('secOff').addEventListener('click', () => { state.showSeconds = false; render(); });
  </script>
</body>
</html>
